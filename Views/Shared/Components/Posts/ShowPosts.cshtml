@model IEnumerable<PostInfoModel>

@foreach(var obj in Model) {
    <div class="card col-md-5 mx-2 my-2">
        <div class="card-body">

            <h5 class="card-title text-primary">
                <div class=" card-title float-start">
                    <span class="dropdown">
                        
                        
                        @if(User.Identity.IsAuthenticated) {
                            <a class="btn btn-outline-primary border-0 dropdown-toggle px-2" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                &#x40;@obj.UserName
                            </a>
                            <ul class="dropdown-menu">
                                @if(User.Identity.Name == obj.UserName) {

                                    <li><a asp-area="Identity" asp-page="/Account/Manage/Index" asp-route-Post="@obj" class="dropdown-item">
                                        <i class="bi bi-person-lines-fill me-2"></i>View Profile
                                    </a></li>
                                    <div class="dropdown-divider"></div>
                                    <li><a asp-controller="Post" asp-action="EditPost" asp-route-PostId="@obj.PostId" class="dropdown-item text-primary">
                                        <i class="bi bi-pen me-2"></i>Edit
                                    </a></li>
                                    <li><a asp-controller="Post" asp-action="DeletePost" asp-route-PostId="@obj.PostId" class="dropdown-item text-danger">
                                        <i class="bi bi-trash me-2"></i>Delete
                                    </a></li>

                                } else {

                                    <li><a asp-area="Identity" asp-page="/Account/Manage/Index" asp-route-Post="@obj" class="dropdown-item">
                                        <i class="bi bi-person-lines-fill me-2"></i>View Profile
                                    </a></li>

                                    
                                    if(@* obj.Following != null &&  *@obj.Following.Contains(User.Identity.Name)) {
                                        <li><a class="dropdown-item text-danger" asp-controller="Post" asp-action="RemoveFollower" asp-route-UserName=@obj.UserName asp-route-FollowerName="@User.Identity.Name">
                                            <i class="bi bi-person-dash-fill me-2"></i>Un-Follow
                                        </a></li>
                                    } else {
                                        <li><a class="dropdown-item" asp-controller="Post" asp-action="AddFollower" asp-route-UserName=@obj.UserName asp-route-FollowerName="@User.Identity.Name">
                                            <i class="bi bi-person-plus me-2"></i>Follow
                                        </a></li>
                                    }
                                }
                            </ul>
                        } else {
                            <a class="btn btn-outline-primary border-0 dropdown-toggle px-2" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                &#x40;@obj.UserName
                            </a>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item text-primary" title="Login or Register to Interact" asp-area="Identity" asp-page="/Account/Login"><i class="bi bi-box-arrow-in-right me-2"></i>Login/Register</a></li>
                            </ul>
                        }
                        
                    </span>
                </div>
            </h5>

            <br/><hr/>

            <p class="card-text">@obj.PostContent</p>

        </div>
    </div>
}
